(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-313f61d4"],{"0f2c":function(t,s,a){"use strict";a("6124")},"25f7":function(t,s,a){t.exports=a.p+"img/checkout-img.cfc0450c.gif"},"40d6":function(t,s,a){},4304:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"wrap"},[e("div",{staticClass:"container pt-3 px-4"},[e("div",{staticClass:"row justify-content-center text-white"},[e("div",{staticClass:"col-lg-8 mb-sm-5 mb-lg-0 pb-4"},[e("StepBar",{staticClass:"pt-5",attrs:{status:t.status}}),t.order.is_paid?t._e():e("h5",{staticClass:"text-center font-weight-bold"},[t._v("資料確認")]),t.order.is_paid?e("h5",{staticClass:"price-focus text-center font-weight-bold"},[t._v("付款成功，感謝購買")]):t._e(),t.order.is_paid?e("img",{staticClass:"col-sm-12",attrs:{src:a("25f7"),alt:"checkout-img"}}):t._e(),e("form",{on:{submit:function(s){return s.preventDefault(),t.payOrder(s)}}},[t.order.is_paid?t._e():e("table",{staticClass:"table-hidden table text-white"},[t._m(0),e("tbody",t._l(t.order.products,(function(s){return e("tr",{key:s.id},[e("td",{attrs:{width:"340"}},[e("img",{attrs:{width:"30",src:s.product.imageUrl,alt:s.product.title}}),e("span",[t._v(t._s(s.product.title))])]),e("td",{staticClass:"align-middle",attrs:{width:"200"}},[t._v(t._s(s.qty)+"/"+t._s(s.product.unit))]),e("td",{staticClass:"align-middle "},[t._v(t._s(t._f("currency")(s.final_total)))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"price-focus text-center pt-4"},[e("span",{staticClass:"mr-5"},[t._v("總計")]),t._v(" "+t._s(t._f("currency")(t.order.total)))])])])]),t.order.is_paid?t._e():e("h5",{staticClass:"text-center font-weight-bold pb-4 pt-4"},[t._v("買家資訊")]),e("table",{staticClass:"customer-info table text-white"},[e("tbody",[e("tr",[e("th",[t._v("Email")]),e("td",[t._v(t._s(t.order.user.email))])]),e("tr",[e("th",[t._v("收件人姓名")]),e("td",[t._v(t._s(t.order.user.name))])]),e("tr",[e("th",[t._v("收件人電話")]),e("td",[t._v(t._s(t.order.user.tel))])]),e("tr",[e("th",[t._v("收件人地址")]),e("td",[t._v(t._s(t.order.user.address))])]),e("tr",[e("th",[t._v("付款狀態")]),e("td",[t.order.is_paid?e("span",{staticClass:"text-success"},[t._v("付款完成")]):e("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])]),!1===t.order.is_paid?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger",attrs:{"data-toggle":"modal","data-target":"#confirmModal",type:"button"}},[t._v("付款確認")])]):t._e(),!0===t.order.is_paid?e("div",{staticClass:"text-right"},[e("router-link",{staticClass:"btn btn-primary text-white",attrs:{to:{name:"CustomerProduct"}}},[t._v("繼續購物")])],1):t._e(),e("div",{staticClass:"modal fade p-3",attrs:{id:"confirmModal",tabindex:"-1",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(1),e("div",{staticClass:"body text-center p-3"},[t._v(" 資料送出將無法變更，確定要送出嗎? "),e("div",{staticClass:"row justify-content-center"},[e("button",{staticClass:"btn btn-danger col-sm-4 mt-3 mx-1",attrs:{type:"button","data-dismiss":"modal"}},[t._v("返回")]),e("button",{staticClass:"btn btn-primary mt-3 mx-1 col-sm-4",attrs:{type:"submit"},on:{click:t.confirmModal}},[t._v("確認")])])])])])])])],1)])])])])},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",{staticClass:"bg-primary"},[a("tr",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("價錢")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header mt-3"},[e("img",{staticClass:"col-sm-12",attrs:{src:a("65cf"),alt:"confirmPayForm"}}),e("div",{staticClass:"header-text"},[t._v("付款確認")])])}],i=(a("99af"),a("1157")),c=a.n(i),o=a("581a"),d={components:{StepBar:o["a"]},data:function(){return{orderId:"",order:{user:{}},status:2}},methods:{getOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("terraria","/order/").concat(t.orderId);t.$http.get(s).then((function(s){t.order=s.data.order,t.getCartList()}))},getCartList:function(){var t=this;t.$store.dispatch("getCartList")},confirmModal:function(){c()("#confirmModal").modal("hide")},payOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("terraria","/pay/").concat(t.orderId);t.$store.dispatch("updateLoading",!0),t.$http.post(s).then((function(s){s.data.success&&(t.status=3,t.getOrder(),window.scroll({top:0,left:0}),t.$store.dispatch("updateLoading",!1))}))}},created:function(){var t=this;t.orderId=t.$route.params.orderId,t.getOrder()}},n=d,l=(a("0f2c"),a("2877")),u=Object(l["a"])(n,e,r,!1,null,"d858df2a",null);s["default"]=u.exports},"581a":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("ul",{staticClass:"steps mt-3"},[a("li",{staticClass:"step",class:{"is-complete":t.status>=1},attrs:{"data-step":"1"}},[t._v("填寫訂單")]),a("li",{staticClass:"step",class:{"is-complete":t.status>=2},attrs:{"data-step":"2"}},[t._v("確認訂單")]),a("li",{staticClass:"step",class:{"is-complete":t.status>=3},attrs:{"data-step":"3"}},[t._v("付款完成")])])])},r=[],i={props:["status"]},c=i,o=(a("d8a4"),a("2877")),d=Object(o["a"])(c,e,r,!1,null,"242ebeae",null);s["a"]=d.exports},6124:function(t,s,a){},"65cf":function(t,s,a){t.exports=a.p+"img/confirmPayForm.f0400bde.gif"},d8a4:function(t,s,a){"use strict";a("40d6")}}]);
//# sourceMappingURL=chunk-313f61d4.c5a182f0.js.map